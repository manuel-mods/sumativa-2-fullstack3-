<div
  class="bg-light min-vh-100 d-flex align-items-center justify-content-center py-4"
>
  <div class="bg-white p-4 rounded shadow-lg w-100" style="max-width: 28rem">
    <h2 class="text-center text-primary fw-bold mb-4">Crear una Cuenta</h2>

    <form
      [formGroup]="registerForm"
      (ngSubmit)="onSubmit()"
      class="needs-validation"
      novalidate
    >
      <!-- Error message -->
      <div *ngIf="errorMessage" class="alert alert-danger mb-4" role="alert">
        {{ errorMessage }}
      </div>

      <!-- Name -->
      <div class="mb-3">
        <label for="name" class="form-label">Nombre Completo</label>
        <input
          type="text"
          id="name"
          formControlName="name"
          class="form-control"
          placeholder="Ingresa tu nombre completo"
        />
        <div
          *ngIf="
            registerForm.get('name')?.invalid &&
            registerForm.get('name')?.touched
          "
          class="text-danger small mt-1"
        >
          <span *ngIf="registerForm.get('name')?.errors?.['required']"
            >El nombre es requerido</span
          >
          <span *ngIf="registerForm.get('name')?.errors?.['minlength']"
            >El nombre debe tener al menos 3 caracteres</span
          >
        </div>
      </div>

      <!-- Email -->
      <div class="mb-3">
        <label for="email" class="form-label">Correo Electrónico</label>
        <input
          type="email"
          id="email"
          formControlName="email"
          class="form-control"
          placeholder="Ingresa tu correo electrónico"
        />
        <div
          *ngIf="
            registerForm.get('email')?.invalid &&
            registerForm.get('email')?.touched
          "
          class="text-danger small mt-1"
        >
          <span *ngIf="registerForm.get('email')?.errors?.['required']"
            >El correo electrónico es requerido</span
          >
          <span *ngIf="registerForm.get('email')?.errors?.['email']"
            >Por favor ingresa un correo electrónico válido</span
          >
        </div>
      </div>

      <!-- Password -->
      <div class="mb-3">
        <label for="password" class="form-label">Contraseña</label>
        <input
          type="password"
          id="password"
          formControlName="password"
          (blur)="validatePassword()"
          class="form-control"
          placeholder="Crea una contraseña"
        />
        <div
          *ngIf="
            registerForm.get('password')?.invalid &&
            registerForm.get('password')?.touched
          "
          class="text-danger small mt-1"
        >
          <span *ngIf="registerForm.get('password')?.errors?.['required']"
            >La contraseña es requerida</span
          >
        </div>
        <div
          *ngIf="passwordValidationErrors.length > 0"
          class="text-danger small mt-1"
        >
          <ul class="ps-3">
            <li *ngFor="let error of passwordValidationErrors">{{ error }}</li>
          </ul>
        </div>
      </div>

      <!-- Confirm Password -->
      <div class="mb-3">
        <label for="confirmPassword" class="form-label"
          >Confirmar Contraseña</label
        >
        <input
          type="password"
          id="confirmPassword"
          formControlName="confirmPassword"
          class="form-control"
          placeholder="Confirma tu contraseña"
        />
        <div
          *ngIf="
            registerForm.get('confirmPassword')?.invalid &&
            registerForm.get('confirmPassword')?.touched
          "
          class="text-danger small mt-1"
        >
          <span
            *ngIf="registerForm.get('confirmPassword')?.errors?.['required']"
            >Por favor confirma tu contraseña</span
          >
        </div>
        <div
          *ngIf="registerForm.errors?.['passwordMismatch'] && registerForm.get('confirmPassword')?.touched"
          class="text-danger small mt-1"
        >
          Las contraseñas no coinciden
        </div>
      </div>

      <!-- Register button -->
      <button type="submit" class="btn btn-primary w-100 mb-3">
        Registrarse
      </button>

      <!-- Login link -->
      <div class="text-center">
        <span class="text-muted">¿Ya tienes una cuenta?</span>
        <a routerLink="/login" class="text-primary text-decoration-none ms-1"
          >Iniciar Sesión</a
        >
      </div>
    </form>
  </div>
</div>
